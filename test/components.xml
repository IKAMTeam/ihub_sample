<?xml version="1.0" encoding="UTF-8"?><COMPONENTS author="ihub_sample_admin" description="" name="integrations.onevizion.com_BPL_01282021013503.xml" site="https&#x3a;&#x2f;&#x2f;integrations.onevizion.com" ts="" ><RULES>
 <RULES_ITEM>
  <IS_ASYNC>0</IS_ASYNC>
  <IS_ENABLED>1</IS_ENABLED>
  <RULE>TEST_INTEGRATION_IHUB_SAMPLE_RESULTS</RULE>
  <RULE_CLASS_ID>1</RULE_CLASS_ID>
  <RULE_ID>100006524</RULE_ID>
  <RULE_TYPE>
   <RULE_TYPE_ID>101303</RULE_TYPE_ID>
   <RULE_TYPE>Daily</RULE_TYPE>
   <REPEAT_INTERVAL>FREQ=DAILY;</REPEAT_INTERVAL>
   <START_DATE>01/01/2000 05:00:00</START_DATE>
   <TYPE_LABELS>
    <T_LABEL>
     <APP_LANG_ID>0</APP_LANG_ID>
     <APP_LABEL_ID>-11754</APP_LABEL_ID>
     <LABEL_TEXT>Daily</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>1</APP_LANG_ID>
     <APP_LABEL_ID>-11754</APP_LABEL_ID>
     <LABEL_TEXT>Daily</LABEL_TEXT>
    </T_LABEL>
    <T_LABEL>
     <APP_LANG_ID>5</APP_LANG_ID>
     <APP_LABEL_ID>-11754</APP_LABEL_ID>
     <LABEL_TEXT>Daily</LABEL_TEXT>
    </T_LABEL>
   </TYPE_LABELS>
   <DESC_LABELS/>
  </RULE_TYPE>
  <SQL_TEXT>declare 
    v_actual_count number;
    v_integration_run_id integration_run.integration_run_id%type;
    v_integration_read_from_stdout integration.read_from_stdout%type;
    v_integration_log_level integration.log_level%type;
    v_record_numbers number := 3;
    
    c_integration_name varchar2(50) := &apos;ihub_sample&apos;;
begin    
    select log_level, read_from_stdout
      into v_integration_log_level, v_integration_read_from_stdout
      from integration
     where integration_name = c_integration_name;
     
    if v_integration_log_level = 3 then
        v_record_numbers := 12;
    elsif v_integration_log_level = 0 then
        v_record_numbers := 9;
    elsif v_integration_log_level = 1 then
        v_record_numbers := 6;
    end if;
    
    if v_integration_read_from_stdout = 1 then
        v_record_numbers := v_record_numbers + 3;
    end if;

    
    select max(integration_run_id)
      into v_integration_run_id
      from integration_run
     where integration_id = (select integration_id
                               from integration
                              where integration_name = c_integration_name);
    select count(*)
      into v_actual_count
      from integration_log
     where integration_run_id = v_integration_run_id;
                            
       
    if v_record_numbers &lt;&gt; v_actual_count then
        pkg_test_integration.test_failed(
            p_integration_name =&gt; c_integration_name,
            p_error =&gt; &apos;Invalid number of Integration Logs. &apos; || to_char(v_actual_count) || &apos; but expected &apos; ||  to_char(v_record_numbers),
            p_integration_run_id =&gt; v_integration_run_id);
    else     
        pkg_test_integration.test_succeed(c_integration_name, v_integration_run_id);
    end if;
       
end;</SQL_TEXT>
  <WARNING_LABEL/>
  <RULE_CLASS_PARAM_VALS/>
  <RULE_HTTPCALLS/>
  <RULE_HTTPCALL_PARAMS/>
  <BPD_ITEMS>
   <T_BPD_ITEM>
    <ITEM_ID>10000616052</ITEM_ID>
    <PKEY>100006524</PKEY>
    <ITEM_TYPE_ID>9</ITEM_TYPE_ID>
    <ITEM_STATUS_ID>1</ITEM_STATUS_ID>
    <BLOB_DATA/>
    <PROGRAM_ID>1002397</PROGRAM_ID>
    <NAME>TEST_INTEGRATION_IHUB_SAMPLE_RESULTS</NAME>
    <APP_LABEL/>
   </T_BPD_ITEM>
  </BPD_ITEMS>
  <RULE_GEOCODING/>
  <RULE_MAP_SNIPPETS/>
  <PROGRAM_ID>1002397</PROGRAM_ID>
  <RULE_TYPE_ID>101303</RULE_TYPE_ID>
  <RULE_TOWER_GROUPS/>
  <COMPONENT_PACKAGES>
   <T_BPL_COMP_PKG>
    <COMPONENT_ID>4</COMPONENT_ID>
    <OBJECT_ID>100006524</OBJECT_ID>
    <COMPONENTS_PACKAGE_ID>101263</COMPONENTS_PACKAGE_ID>
    <NAME>IHUB_SAMPLE_TEST</NAME>
    <PROGRAM_ID>1002397</PROGRAM_ID>
    <BPD_ITEMS/>
   </T_BPL_COMP_PKG>
  </COMPONENT_PACKAGES>
  <CONFIG_FIELD_IDNUMS/>
  <TASK_DATE_IDNUMS/>
  <TASK_IDNUMS/>
  <TRACKOR_TYPE_IDNUMS/>
  <RELATION_TYPE_IDNUMS/>
  <WP_TEMPLATE_IDNUMS/>
  <WF_TEMPLATE_IDNUMS/>
  <IMPORT_IDNUMS/>
  <REPORT_IDNUMS/>
  <COMPONENT_LABELS/>
 </RULES_ITEM>
</RULES>
</COMPONENTS>